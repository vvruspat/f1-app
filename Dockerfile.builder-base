FROM node:22-alpine AS base-builder
WORKDIR /app

ARG TURBO_TOKEN
ARG TURBO_TEAM
ARG TURBO_CACHE
ARG SENTRY_AUTH_TOKEN

ENV TURBO_TOKEN=$TURBO_TOKEN
ENV TURBO_TEAM=$TURBO_TEAM
ENV TURBO_CACHE=$TURBO_CACHE
ENV SENTRY_AUTH_TOKEN=$SENTRY_AUTH_TOKEN

COPY . .

RUN npm ci

RUN npm run build